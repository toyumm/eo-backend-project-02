<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>게시판 게시물</title>
    <style>
        #list > caption { caption-side: top; text-align: right; margin-bottom: 6px; }

        #pagination {
            list-style-type: none; padding: 0; margin: 1em 0;
            font: 0.825em Tahoma, Verdana, sans-serif;
            display: flex; gap: 1em;
        }

        #pagination > li { border: 1px solid #aaa; }

        #pagination > li > a, #pagination > li > span {
            display: block; padding: 0.3em 0.6em;
        }

        #pagination > li > a { text-decoration: none; }

        #pagination > li > span {
            background-color: #555; font-weight: bold; color: white;
        }
    </style>
</head>
<body>

<h1>Board List</h1>

<table>
    <caption th:object="${pagination}">
        <span th:text="*{pageNumber}"></span> / <span th:text="*{lastPage}"></span>
    </caption>
    <thead>
    <tr>
        <th>ID</th>
        <th>Title</th>
        <th>Writer</th>
        <th>Views</th>
        <th>Comments</th>
        <th>Likes</th>
        <th>Date</th>
        <th>Last Updated</th>
    </tr>
    </thead>
    <tbody>
    <tr th:each="postDto : ${postPage.content}" th:object="${postDto}">
        <td th:text="*{id}"></td>

        <td>
            <a th:href="@{/board/{boardId}/post/read(
                    boardId=${boardId},
                    id=${postDto.id},
                    page=${criteria.page},
                    size=${criteria.size}
                  )}"
               th:text="*{title}"></a>
        </td>

        <td th:text="*{writer}"></td>
        <td th:text="*{viewCount}"></td>
        <td th:text="*{commentsCount}"></td>
        <td th:text="*{likesCount}"></td>
        <td th:text="*{#temporals.format(createdAt, 'yyyy-MM-dd HH:mm')}"></td>
        <td th:text="*{#temporals.format(updatedAt, 'yyyy-MM-dd HH:mm')}"></td>
    </tr>
    </tbody>
</table>

<ol id="pagination" th:object="${pagination}">
    <li th:if="*{startPage} != 1">
        <a th:href="@{/board/{boardId}/post/list(boardId=${boardId}, page=1, size=${criteria.size})}">First</a>
    </li>

    <li th:if="*{prev}">
        <a th:href="@{/board/{boardId}/post/list(boardId=${boardId}, page=*{startPage} - 1, size=${criteria.size})}">Prev</a>
    </li>

    <th:block th:each="p : *{#numbers.sequence(startPage, endPage)}">
        <li th:if="${p} == *{pageNumber}">
            <span th:text="${p}"></span>
        </li>
        <li th:unless="${p} == *{pageNumber}">
            <a th:href="@{/board/{boardId}/post/list(boardId=${boardId}, page=${p}, size=${criteria.size})}"
               th:text="${p}"></a>
        </li>
    </th:block>

    <li th:if="*{next}">
        <a th:href="@{/board/{boardId}/post/list(boardId=${boardId}, page=*{endPage} + 1, size=${criteria.size})}">Next</a>
    </li>

    <li th:if="*{endPage} != *{lastPage}">
        <a th:href="@{/board/{boardId}/post/list(boardId=${boardId}, page=*{lastPage}, size=${criteria.size})}">Last</a>
    </li>
</ol>

<p>
    [<a th:href="@{/board/{boardId}/post/write(boardId=${boardId})}">Write</a>]
</p>

</body>
</html>